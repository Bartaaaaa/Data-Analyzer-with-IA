<!DOCTYPE html>
<html lang="en">
  <body>
    <div class="app">
      <main class="main">
        <!-- Filters -->
        <div class="filters">
          <button class="filter active">
            Last 30 Days <span class="material-symbols-outlined">expand_more</span>
          </button>
          <button class="filter">Last 7 Days</button>
          <button class="filter">All Time</button>
        </div>

        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
          <div class="card top-artists">
            <h3>Top 10 Artists</h3>

            <ng-container *ngIf="topArtists(); else loading">
              <ul class="rank-list">
                <li *ngFor="let artist of topArtists()?.top_artists; let i = index">
                  <span class="rank">{{ i + 1 }}</span>
                  <img [src]="artist.image" [alt]="artist.name" />
                  <div class="info">
                    <p class="name">{{ artist.name }}</p>
                    <p class="plays">Popularit√© : {{ artist.popularity }}</p>
                  </div>
                </li>
              </ul>
            </ng-container>

            <ng-template #loading>
              <p>Chargement des artistes...</p>
            </ng-template>
          </div>

          <!-- Top Tracks -->
          <div class="card top-tracks">
            <h3>Top 10 Tracks</h3>
            <ul class="rank-list">
              <li>
                <span class="rank">1</span>
                <img
                  src="https://i.scdn.co/image/ab67616d0000b273b48e4d2f33f2fca9c9e4f9a3"
                  alt="Heat Waves"
                />
                <div class="info">
                  <p class="name">Heat Waves</p>
                  <p class="artist">Glass Animals</p>
                </div>
                <span class="plays">432 plays</span>
              </li>
              <li>
                <span class="rank">2</span>
                <img
                  src="https://i.scdn.co/image/ab67616d0000b2731f712a4ef7d2a62aa274c7e6"
                  alt="The Less I Know the Better"
                />
                <div class="info">
                  <p class="name">The Less I Know the Better</p>
                  <p class="artist">Tame Impala</p>
                </div>
                <span class="plays">389 plays</span>
              </li>
            </ul>
            <a href="#">View All Tracks</a>
          </div>

          <!-- Genre Distribution -->
          <div class="card genre-distribution">
            <h3>Listening by Genre</h3>
            <canvas id="genreDonut"></canvas>

            <div class="legend">
              <ng-container *ngIf="topArtists()"> </ng-container>
            </div>
          </div>
        </div>
      </main>
    </div>
  </body>
</html>
